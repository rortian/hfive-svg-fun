<!doctype html>
<html>
  <head>
    <title>Scratch</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.js" type="text/javascript"></script>
    <script type="text/javascript">

      function makeSVG(tag, attrs) {
        var el= document.createElementNS('http://www.w3.org/2000/svg', tag);
        for (var k in attrs)
          el.setAttribute(k, attrs[k]);
        return el;
      }

      function makeDefPath(){
          return makeSVG('path',{d:less_hard_coded(),id:"circle0", style:"fill:#999966;fill-opacity:1"})
      }

      path_parts = []
      path_parts[0] = "M 362.15625,0 C 162.55832,1.2655435 0.84411801,163.24042 0,362.9375 C 0.84132403,296.5919 54.955993,243 121.5,243 C 188.044,243 242.15868,296.59191 243,362.9375 C 243.8347,297.1143 297.11433,243.8347 362.9375,243 C 296.59189,242.15868 243,188.04402 243,121.5 C 243,54.955976 296.59189,0.84132417 362.9375,0 z"
      path_parts[1] = "M 366.0625,0 C 432.40811,0.84132422 486,54.955979 486,121.5 C 486,188.04402 432.40811,242.15868 366.0625,243 C 431.88568,243.83469 485.1653,297.11431 486,362.9375 C 486.84132,296.59189 540.95597,243 607.5,243 C 674.04403,242.99999 728.15868,296.5919 729,362.9375 C 728.15478,162.9787 566.02128,0.84522439 366.0625,0 z"
      path_parts[2] = "M 0,366.0625 C 0.84522426,566.0213 162.9787,728.15477 362.9375,729 C 296.59194,728.15868 243,674.04402 243,607.5 C 243,540.956 296.59192,486.84132 362.9375,486 C 297.11434,485.1653 243.8347,431.88569 243,366.0625 C 242.15868,432.40808 188.044,486 121.5,486 C 54.955996,486 0.84132409,432.4081 0,366.0625 z"
      path_parts[3] = "M 486,366.0625 C 485.16529,431.88568 431.88567,485.1653 366.0625,486 C 432.40809,486.84133 486,540.95598 486,607.5 C 485.99999,674.04404 432.40808,728.15868 366.0625,729 C 566.02129,728.15478 728.15476,566.0213 729,366.0625 C 728.15868,432.40808 674.04403,486 607.5,486 C 540.95597,486 486.84132,432.4081 486,366.0625 z"

      thetas = {left:Math.PI,right:0,up:Math.PI/2,down:3*Math.PI/2}

      function hard_coded_path(){
        return path_parts[0]+" "+path_parts[1]+" "+path_parts[2]+" "+path_parts[3]
      }

      function less_hard_coded(){
        return first_part(346.5)
      }

      function first_part(r){
        return "M " + r + ",0 " + figure_out_ellipse(r) + " z "
      }

      function figure_out_ellipse(r){
        var first_leg = "a"+r+","+r+" 0 0,0 "+(-r)+","+r
        var second_leg = "a"+r/3+","+r/3+" -90 0,0 0,"+(-2*r/3)
        return first_leg + second_leg
      }

      $(document).ready(function(){
          var defs = makeSVG('defs',{})

          var paths = []

          paths[0] = makeDefPath()

          defs.appendChild(paths[0])

          $('svg').append(defs)

          var use = makeSVG('use')

          use.setAttributeNS("http://www.w3.org/1999/xlink",'href',"#circle0")

          $('svg').append(use)
          });
    </script>
  </head>
  <body>
    <svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="729" height="729"></svg>
  </body>
</html>
