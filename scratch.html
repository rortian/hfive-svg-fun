<!doctype html>
<html>
  <head>
    <title>Scratch</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.js" type="text/javascript"></script>
    <script type="text/javascript">

      function makeSVG(tag, attrs) {
        var el= document.createElementNS('http://www.w3.org/2000/svg', tag);
        for (var k in attrs)
          el.setAttribute(k, attrs[k]);
        return el;
      }

      function makeDefPath(){
          return makeSVG('path',{d:less_hard_coded(),id:"circle0", style:"fill:#999966;fill-opacity:1"})
      }

      function less_hard_coded(){
        return first_part(346.5)
      }

      function first_part(r){
        return "M " + r + ",0 " + figure_out_ellipse(r) + " z "
      }

      function figure_out_ellipse(r){
        var first_leg = "a"+r+","+r+" 0 0,0 "+(-r)+","+r
        var second_leg = "a"+r/3+","+r/3+" 0 0,1 "+2*r/3+",0"
        var third_leg = "a"+r/3+","+r/3+" 0 0,1 "+r/3+","+(-r/3)
        var fourth_leg = "a"+r/3+","+r/3+" 0 0,1 0,"+(-2*r/3)
        return first_leg + second_leg + third_leg + fourth_leg
      }

      $(document).ready(function(){
          var defs = makeSVG('defs',{})

          var paths = []

          paths[0] = makeDefPath()

          defs.appendChild(paths[0])

          $('svg').append(defs)

          var use = makeSVG('use')

          use.setAttributeNS("http://www.w3.org/1999/xlink",'href',"#circle0")

          $('svg').append(use)

          use = makeSVG('use')

          use.setAttributeNS("http://www.w3.org/1999/xlink",'href',"#circle0")

          var group = makeSVG('g',{transform:"rotate(90,182.5,182.5) translate(346.5)"})

          group.appendChild(use)

          $('svg').append(group)
          });
    </script>
  </head>
  <body>
    <svg version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" width="729" height="729"></svg>
  </body>
</html>
